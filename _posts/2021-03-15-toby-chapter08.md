---
layout: post
title: '8장 스프링이란 무엇인가?'
date: 2021-03-15 00:30:00
category: [toby-spring]
draft: false
comments: true
---

## 8.1. 스프링의 정의

-   가장 잘 알려진 정의

    -   자바 엔터프라이즈 개발을 편하게 해주는 오픈소스 경량급 애플리케이션 프레임워크

-   애플리케이션 프레임워크

    -   특정 계층, 기술, 업무 분야에 국한되지 않음
    -   애플리케이션의 전 영역을 포괄하는 프레임워크
        -   스프링을 MVC 프레임워크라고 생각하는 것은 스프링이 다루는 일부 영역만 봤기 때문
        -   일차적인 스프링의 존재 목적은 엔터프라이즈 애플리케이션 전 계층/전 영역에 기능을 제공하여 애플리케이션을 편리하게 개발하게 해주기 위함

-   경량급(lightweight)

    -   불필요하게 무겁지 않다
        -   EJB (고가의 느리고 무거운 WAS 서버 필요)
        -   Spring (가장 단순한 서버환경인 Tomcat, Jetty에서도 완벽하게 동작)
    -   스프링을 기반으로 제작되는 코드 자체도 상대적으로 작고 단순하다

-   자바 엔터프라이즈 개발을 편하게

    -   로우레벨 기술에 많은 신경을 쓰지 않으면서도 비즈니스 로직을 빠르고 효과적으로 구현

-   오픈소스
    -   엔터프라이즈 개발을 위한 프로그램이므로 100% 오픈소스이면 불안...
    -   오픈소스이지만 회사(스프링소스)가 개발 전담 중
        -   이러한 방식을 통해 오픈소스의 장점을 충분히 취하며 동시에 오픈소스의 단점/한계를 극복

## 8.2. 스프링의 목적

-   왜 스프링을 사용해서 엔터프라이즈 애플리케이션 개발을 편하게 하려고 하는가?

    -   원래 안 편한 것이므로...

-   엔터프라이즈 개발의 복잡함

    -   복잡함의 근본적인 이유
        -   기술적인 제약조건과 요구사항이 늘어가기 때문
        -   핵심 기능인 비즈니스 로직의 복잡함이 증가하기 떄문
    -   복잡함을 가중시키는 원인
        -   기술적 복잡함과 비즈니스 로직의 복잡함이라는 두 가지가 한 데 얽혀 있기 때문
    -   복잡함을 해결하려는 도전
        -   EJB : 실패
            -   EJB라는 틀 안에서 자바 코드를 만들게 강제(EJB 특정 클래스 상속 등)함으로써 자바의 원래 장점마저 잃어버림
        -   스프링 : 비침투(non-invasive)적인 방식을 통해 효과적인 해결
            -   기술적인 복잡함과 비즈니스 로직을 다루는 코드를 분리

-   복잡함을 상대하는 스프링의 전략
    -   기술적인 복잡함을 상대하는 전략
        -   기술에 대한 접근 방식이 일관성이 없고, 특정 환경에 종속적이다
            -   스프링의 해결책 : 서비스 추상화
        -   기술적인 처리를 담당하는 코드가 성격이 다른 코드에 섞여서 등장
            -   스프링의 해결책 : AOP
    -   비즈니스와 애플리케이션 로직의 복잡함을 상대하는 전략
        -   자바라는 객체지향 기술 그 자체
        -   스프링은 객체지향 언어의 장점을 잘 살리지 못하게 방해했던 요소를 제거할 뿐
        -   핵심 도구 : 객체지향(OO)과 DI
-   결국 모든 스프링의 기술과 전략은 객체지향이라는 자바 언어가 가진 강력한 도구를 극대화해서 사용할 수 있도록 돕는 것

## 8.3. POJO 프로그래밍

-   스프링의 핵심 : POJO
    -   애플리케이션을 POJO로 개발할 수 있게 해 주는 가능기술(enabling technology) : IoC/DI, AOP, PSA
-   POJO란 무엇인가?
    -   Plain Old Java Object (by Martin Fowler)
    -   "간단한 자바오브젝트 쓰는데요" < "POJO 방식의 기술을 사용합니다" 뭔가 멋져 보임;;
-   POJO의 조건
    -   특정 규약에 종속되지 않음
    -   특정 환경에 종속되지 않음 (ex. HttpSErvletRequest, HttpSession, 캐시 API 등)
    -   객체지향적인 원리에 충실하면서, 환경/기술에 종속되지 않고 필요에 따라 재활용될 수 있는 방식으로 설계된 오브젝트
-   POJO의 장점
    -   깔끔한 코드
    -   자동화된 테스트에 매우 유리
    -   객체지향적인 설계를 자유롭게 적용 가능
-   POJO 프레임워크
    -   엔터프라이즈 기술의 복잡함은 스프링 프레임워크가 다 처리했다구!
    -   비즈니스 로직의 복잡함은 POJO로!

## 8.4. 스프링의 기술

-   IoC/DI
    -   유연한 확장이 가능하게 하기 위해서
    -   DI의 활용 방법
        -   핵심 기능의 변경
            -   DAO의 구현을 JDBC로 했다가 JPA, Hibernate 등으로 통쨰로 바꾸기
        -   핵심 기능의 동적인 변경
            -   예시) 사용자의 등급에 따라 다른 DataSource를 사용하게 하기
            -   다이내믹 라우팅 프록시, 프록시 오브젝트
        -   부가기능의 추가
            -   데코레이터 패턴 활용
            -   예시) 트랜잭션 기능 부여
        -   인터페이스의 변경
            -   A는 원래 B 인터페이스를 사용하도록 만들어져 있는데, B를 구현하지 않은 C를 쓰고 싶다면?
                -   B 인터페이스를 구현했으면서 내부에서 C를 쓰는 어댑터 오브젝트를 쓰면 되지롱.
        -   프록시
            -   lazy loading 등으로 응용 가능
        -   템플릿/콜백
        -   싱글톤/오브젝트 스코프
        -   테스트
            -   여러 오브젝트와 협력해서 동작하는 오브젝트의 효과적인 테스트 방법 : 가능한 한 고립시키기
                -   다른 오브젝트와의 사이에서 일어나는 일을 테스트를 위해 조작한다 (목 객체 등으로)
                    -   이것은 DI 덕분에 가능한 것 !!
    -   DI의 용도는 디자인 패턴 중 오브젝트 합성 방식을 따르는 패턴과 관련이 있음을 알 수 있다
-   AOP
    1. 스프링과 같이 다이내믹 프록시 사용
    2. 자바 언어의 한계를 넘어서는 언어의 확장(AsepctJ) 이용
    -   스프링은 프록시 방식 AOP를 기본으로, 원한다면 AsepctJ AOP로 바꿔서 사용도 가능
        (특별한 기능 중에는 AspectJ를 꼭 사용해야 하는 것도 있음)
    -   적용 단계
        -   미리 준비된 AOP 이용 -> 전담팀을 통한 정책 AOP 적용(보안,로깅,트레이싱,모니터링 등) -> 자유로운 이용
-   PSA
    -   일관성 있는 서비스 추상화
    -   POJO 코드가 특정 환경/기술에 직접 노출되어 만들어지지 않음
